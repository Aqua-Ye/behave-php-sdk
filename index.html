<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Behave-php-sdk by othierry</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Behave-php-sdk</h1>
        <p class="header">Behave.io PHP SDK</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/othierry/behave-php-sdk/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/othierry/behave-php-sdk/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/othierry/behave-php-sdk">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/othierry">othierry</a></p>


      </header>
      <section>
        <h1>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h1>

<p>Our PHP library lets you easily identify your users, track their behaviours and make full use of the API.
The SDK also allows you to dynamically create and remove leaderboards, contests, badges, retrieve leaderboard results etc...</p>

<h1>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting started</h1>

<pre><code>$ git clone git@github.com:othierry/behave-php-sdk.git
</code></pre>

<div class="highlight highlight-php"><pre><span class="k">require_once</span><span class="p">(</span><span class="s2">"/path/to/behave/Behave.php"</span><span class="p">);</span>

<span class="nx">Behave</span><span class="o">::</span><span class="na">init</span><span class="p">(</span><span class="s2">"YOUR_API_SECRET);</span>
</pre></div>

<h2>
<a name="players" class="anchor" href="#players"><span class="octicon octicon-link"></span></a>Players</h2>

<h3>
<a name="identify" class="anchor" href="#identify"><span class="octicon octicon-link"></span></a>Identify</h3>

<p>You need to identify your users at least once so their player profiles can be created.
If you call <code>identify()</code> multiple times with the same user id, the existing player is updated and returned instead. You can optionally attribute some traits to the player.</p>

<div class="highlight highlight-php"><pre><span class="nv">$player</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">identify</span><span class="p">(</span><span class="s2">"42"</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="c1">// traits</span>
  <span class="s1">'email'</span>   <span class="o">=&gt;</span> <span class="s1">'olivier@behave.io'</span><span class="p">,</span>
  <span class="s1">'name'</span>    <span class="o">=&gt;</span> <span class="s1">'Olivier Thierry'</span><span class="p">,</span>
  <span class="s1">'picture'</span> <span class="o">=&gt;</span> <span class="s1">'http://url_to_picture'</span><span class="p">,</span>
  <span class="s1">'foo'</span>     <span class="o">=&gt;</span> <span class="s1">'bar'</span>
<span class="p">));</span>
</pre></div>

<p>the returned Player has the following attributes</p>

<table>
<thead><tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Value</th>
</tr></thead>
<tbody>
<tr>
<td>_id</td>
<td align="center">String</td>
<td align="right">The id of the Player</td>
</tr>
<tr>
<td>reference_id</td>
<td align="center">String</td>
<td align="right">The custom id use have use in <code>identify()</code>
</td>
</tr>
<tr>
<td>points</td>
<td align="center">Number</td>
<td align="right">The number of points of the player (default to 0)</td>
</tr>
<tr>
<td>traits</td>
<td align="center">Object</td>
<td align="right">The custom traits you have given to the player</td>
</tr>
</tbody>
</table><h2>
<a name="behaviours" class="anchor" href="#behaviours"><span class="octicon octicon-link"></span></a>Behaviours</h2>

<p>You need to track your players behaviours if you want to reward them for doing so. Tracking can be either <strong>simple</strong> or <strong>contextual</strong>. You can specify ANY key value pairs to describe the context to which the behaviour was taken. </p>

<h3>
<a name="simple-tracking" class="anchor" href="#simple-tracking"><span class="octicon octicon-link"></span></a>Simple tracking</h3>

<div class="highlight highlight-php"><pre><span class="nx">Behave</span><span class="o">::</span><span class="na">track</span><span class="p">(</span><span class="s2">"42"</span><span class="p">,</span> <span class="s2">"login"</span><span class="p">);</span>
</pre></div>

<h3>
<a name="contextual-tracking" class="anchor" href="#contextual-tracking"><span class="octicon octicon-link"></span></a>Contextual tracking</h3>

<div class="highlight highlight-php"><pre><span class="nx">Behave</span><span class="o">::</span><span class="na">track</span><span class="p">(</span><span class="s2">"42"</span><span class="p">,</span> <span class="s2">"coment-tvshow"</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'tvShow'</span>  <span class="o">=&gt;</span> <span class="mi">24</span><span class="p">,</span>
  <span class="s1">'episode'</span> <span class="o">=&gt;</span> <span class="mi">11</span>
<span class="p">));</span>
</pre></div>

<h3>
<a name="tracking-results" class="anchor" href="#tracking-results"><span class="octicon octicon-link"></span></a>Tracking results</h3>

<p>When you track a user behaviours using <code>Behave::track()</code> you get back a result object you can use. The result contains the actions that the tracking has triggered (from your <a href="http://dashboard.behave.io/recipes">recipes</a>).</p>

<div class="highlight highlight-php"><pre><span class="nv">$bhResults</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">track</span><span class="p">(</span><span class="s2">"42"</span><span class="p">,</span> <span class="s2">"check-in"</span><span class="p">);</span>
</pre></div>

<p>The results <strong>always contains 3 attributes</strong>.</p>

<table>
<thead><tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Value</th>
</tr></thead>
<tbody>
<tr>
<td>badge</td>
<td align="center">Object</td>
<td align="right">The unlocked badge (if any, null otherwise)</td>
</tr>
<tr>
<td>points</td>
<td align="center">Object</td>
<td align="right">With 2 attributes: <code>earned</code> and <code>balance</code>. <code>earned</code> is the number of points the user earned by taking the action or 0 if no points earned, <code>balance</code> is the updated balance of the player points</td>
</tr>
<tr>
<td>leaderboards</td>
<td align="center">Array[Object]</td>
<td align="right">Leaderboard updates (if any,  empty otherwise). See bellow for detailed structure</td>
</tr>
</tbody>
</table><p>Example accessing <code>$bhResults-&gt;points</code> attribute.</p>

<div class="highlight highlight-php"><pre><span class="k">echo</span> <span class="nv">$bhResults</span><span class="o">-&gt;</span><span class="na">points</span>
<span class="p">{</span> 
  <span class="c1">// The number of points the user earned by taking the action</span>
  <span class="s1">'earned'</span>  <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span> 

  <span class="c1">// The player's updated balance including the points he just earned</span>
  <span class="s1">'balance'</span> <span class="o">=&gt;</span> <span class="mi">840</span>
<span class="p">}</span>
</pre></div>

<p>If not null <code>$bhResults-&gt;badge</code> contains the Badge that the user has just unlocked. The structure looks like this:</p>

<div class="highlight highlight-php"><pre><span class="k">echo</span> <span class="nv">$bhResults</span><span class="o">-&gt;</span><span class="na">badge</span> 
<span class="c1">// Example output</span>
<span class="p">{</span>
    <span class="c1">// Reward id</span>
    <span class="s2">"_id"</span>    <span class="o">=&gt;</span> <span class="s2">"52a01b67cc7df72c79000003"</span>
    <span class="c1">// Number of times this reward was earned by this player</span>
    <span class="s2">"count"</span>  <span class="o">=&gt;</span> <span class="mi">1</span>
    <span class="c1">// Badge definition</span>
    <span class="s2">"badge"</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Badge id</span>
      <span class="s2">"_id"</span>          <span class="o">=&gt;</span> <span class="s2">"529fff2356ce248366000006"</span>
      <span class="c1">// Badge custom id you have defined, null otherwise</span>
      <span class="s2">"reference_id"</span> <span class="o">=&gt;</span> <span class="s2">"deloitte-newbie-badge"</span>
      <span class="c1">// badge name</span>
      <span class="s2">"name"</span>         <span class="o">=&gt;</span> <span class="s2">"Deloitte Newbie"</span>
      <span class="c1">// badge hint</span>
      <span class="s2">"hint"</span>         <span class="o">=&gt;</span> <span class="s2">"Check-in 2 times at Deloitte"</span>
      <span class="c1">// badge unlock message</span>
      <span class="s2">"message"</span>      <span class="o">=&gt;</span> <span class="s2">"Whooa! Look like you are new in da place. keep the effort and you will be rewarded."</span>
    <span class="p">}</span>
  <span class="p">}</span>
</pre></div>

<p>If not empty, <code>$bhResults-&gt;leaderboards</code> will contain something like this</p>

<div class="highlight highlight-php"><pre><span class="k">echo</span> <span class="nv">$bhResults</span><span class="o">-&gt;</span><span class="na">leaderboards</span>
<span class="p">[</span>
  <span class="p">{</span>
     <span class="c1">// The updated leaderboard</span>
     <span class="s1">'leaderboard'</span>      <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s1">'_id'</span><span class="o">=&gt;</span> <span class="s1">'529fff1156ce248366000006'</span><span class="p">,</span>
        <span class="s1">'reference_id'</span> <span class="o">=&gt;</span> <span class="s1">'test-lb'</span>
     <span class="p">},</span>
     <span class="c1">// Player's position before the update</span>
     <span class="s1">'prev_position'</span>    <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
     <span class="c1">// Player's position after the update</span>
     <span class="s1">'post_position'</span>    <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
     <span class="c1">// Player's updated score</span>
     <span class="s1">'score'</span>            <span class="o">=&gt;</span> <span class="mi">435</span><span class="p">,</span>
   <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<h2>
<a name="leaderboards" class="anchor" href="#leaderboards"><span class="octicon octicon-link"></span></a>Leaderboards</h2>

<h3>
<a name="getting-leaderboard-current-results" class="anchor" href="#getting-leaderboard-current-results"><span class="octicon octicon-link"></span></a>Getting leaderboard current results</h3>

<p>You can fetch the actual results of any leaderboard at anytime. Here is an example:</p>

<div class="highlight highlight-php"><pre><span class="nv">$lbResults</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">fetchLeaderboardResults</span><span class="p">(</span><span class="s1">'sample-leaderboard'</span><span class="p">);</span>
<span class="c1">// or</span>
<span class="nv">$lbResults</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">fetchLeaderboardResults</span><span class="p">(</span><span class="s1">'sample-leaderboard'</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
</pre></div>

<p>Available options are:</p>

<table>
<thead><tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Value</th>
</tr></thead>
<tbody>
<tr>
<td>page</td>
<td align="center">Number</td>
<td align="right">(Optional) The results page to fetch. Default is 1</td>
</tr>
<tr>
<td>limit</td>
<td align="center">Number</td>
<td align="right">(Optional) The max number of results per page. MAXIMUM is 1000</td>
</tr>
<tr>
<td>max</td>
<td align="center">Number</td>
<td align="right">(Optional) The maximum position to fetch, default is 0 =&gt; None</td>
</tr>
<tr>
<td>players</td>
<td align="center">Array[String]</td>
<td align="right">(Optional) The players to include in the results, default is null =&gt; ALL</td>
</tr>
<tr>
<td>positions</td>
<td align="center">String</td>
<td align="right">(Optional) The way positions are calculated. Possible values are <code>relative</code> and <code>absolute</code>. <code>relative</code> will set the positions according to the players that are included in the results, <code>absolute</code> will set the positions according to all the players in the leaderboards. This is useful when for example you want to fetch the results for a player and his friends only. In this situation you could pass <code>relative</code> so that the positions are computed between friends and not between all the players in the leaderboards.</td>
</tr>
</tbody>
</table><p>Results structure will look like this</p>

<div class="highlight highlight-php"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s1">'score'</span>  <span class="o">=&gt;</span> <span class="mi">129</span><span class="p">,</span>
    <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">'player'</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s1">'_id'</span> <span class="o">=&gt;</span> <span class="s2">"529fe03ecbd86b9d6c000002"</span><span class="p">,</span>
      <span class="s1">'reference_id'</span> <span class="o">=&gt;</span> <span class="s1">'42'</span><span class="p">,</span>
      <span class="s1">'traits'</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s1">'Olivier Thierry'</span>
        <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">'olivier@behave.io'</span>
      <span class="p">},</span>
      <span class="s1">'identities'</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="s1">'facebook'</span> <span class="o">=&gt;</span> <span class="mi">12323</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s1">'score'</span>  <span class="o">=&gt;</span> <span class="mi">102</span><span class="p">,</span>
    <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s1">'player'</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s1">'_id'</span> <span class="o">=&gt;</span> <span class="s2">"947pg03ecbd86b9d6c05520"</span><span class="p">,</span>
      <span class="s1">'reference_id'</span> <span class="o">=&gt;</span> <span class="s1">'43'</span><span class="p">,</span>
      <span class="s1">'traits'</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s1">'name'</span>  <span class="o">=&gt;</span> <span class="s1">'Olivier Jeandel'</span>
        <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">'jide@behave.io'</span>
      <span class="p">},</span>
      <span class="s1">'identities'</span> <span class="o">=&gt;</span> <span class="p">{</span>
         <span class="s1">'facebook'</span> <span class="o">=&gt;</span> <span class="mi">5435</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<h3>
<a name="getting-leaderboard-previous-results" class="anchor" href="#getting-leaderboard-previous-results"><span class="octicon octicon-link"></span></a>Getting leaderboard previous results</h3>

<p>When a leaderboard is reset (Either by calling Behave::resetLeaderboard() or by hitting the end of the leaderboard's timeframe), a copy of the previous leaderboard results is available (e.g A daily leaderboard will keep the results of the previous day).</p>

<p>Here is how you can access it:</p>

<div class="highlight highlight-php"><pre><span class="nv">$prevLeaderboardResults</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">fetchLeaderboardPreviousResults</span><span class="p">(</span><span class="s1">'test-lb'</span><span class="p">);</span>
</pre></div>

<ul>
<li>The <strong>structure</strong> is identical to <code>Behave::fetchLeaderboardResults()</code>
</li>
<li>The <strong>options</strong> are identical to <code>Behave::fetchLeaderboardResults()</code>
</li>
</ul><h3>
<a name="getting-leaderboard-result-for-a-specific-player" class="anchor" href="#getting-leaderboard-result-for-a-specific-player"><span class="octicon octicon-link"></span></a>Getting leaderboard result for a specific player</h3>

<p>You can also fetch the result for a particular player, on a particular leaderboard. (<em>e.g What is the position of my user 42 on leaderboard test-lb</em>)</p>

<div class="highlight highlight-php"><pre><span class="nv">$playerResult</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">fetchLeaderboardResultForPlayer</span><span class="p">(</span><span class="s1">'test-lb'</span><span class="p">,</span> <span class="s1">'42'</span><span class="p">);</span>
<span class="p">{</span>
  <span class="s1">'score'</span>    <span class="o">=&gt;</span> <span class="mi">435</span><span class="p">,</span>
  <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="getting-leaderboard-results-for-a-specific-player" class="anchor" href="#getting-leaderboard-results-for-a-specific-player"><span class="octicon octicon-link"></span></a>Getting leaderboard results for a specific player</h3>

<p>You can also fetch all the leaderboards the player is in, and get the results for that player.</p>

<div class="highlight highlight-php"><pre><span class="nv">$playerResults</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">fetchLeaderboardResultsForPlayer</span><span class="p">(</span><span class="s1">'42'</span><span class="p">);</span>
<span class="p">[</span>
  <span class="p">{</span>
     <span class="s1">'leaderboard'</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s1">'_id'</span><span class="o">=&gt;</span> <span class="s1">'529fff1156ce248366000006'</span><span class="p">,</span>
        <span class="s1">'reference_id'</span> <span class="o">=&gt;</span> <span class="s1">'test-lb'</span>
     <span class="p">},</span>
     <span class="c1">// Player's position</span>
     <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
     <span class="c1">// Player's updated score</span>
     <span class="s1">'score'</span> <span class="o">=&gt;</span> <span class="mi">435</span>
  <span class="p">},</span>
  <span class="p">{</span>
     <span class="s1">'leaderboard'</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s1">'_id'</span><span class="o">=&gt;</span> <span class="s1">'876fff1156ce248366000367'</span><span class="p">,</span>
        <span class="s1">'reference_id'</span> <span class="o">=&gt;</span> <span class="s1">'another-test-lb'</span>
     <span class="p">},</span>
     <span class="c1">// Player's position</span>
     <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">18</span><span class="p">,</span>
     <span class="c1">// Player's updated score</span>
     <span class="s1">'score'</span> <span class="o">=&gt;</span> <span class="mi">114</span>
  <span class="p">}</span>
<span class="p">]</span>

</pre></div>

<p>You can pass an array of options as the second parameter (optional, see bellow for list of available options).</p>

<p>For example, if I want to fetch all the leaderboard results for player 42 where he/she is in the top 3:</p>

<div class="highlight highlight-php"><pre><span class="nv">$playerResults</span> <span class="o">=</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">fetchLeaderboardResultsForPlayer</span><span class="p">(</span><span class="s2">"42"</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'max'</span> <span class="o">=&gt;</span> <span class="mi">3</span> <span class="c1">// Max position</span>
<span class="p">));</span>
<span class="p">[</span>
  <span class="p">{</span>
     <span class="s1">'leaderboard'</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s1">'_id'</span><span class="o">=&gt;</span> <span class="s1">'529fff1156ce248366000006'</span><span class="p">,</span>
        <span class="s1">'reference_id'</span> <span class="o">=&gt;</span> <span class="s1">'test-lb'</span>
     <span class="p">},</span>
     <span class="c1">// Player's position</span>
     <span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
     <span class="c1">// Player's updated score</span>
     <span class="s1">'score'</span> <span class="o">=&gt;</span> <span class="mi">435</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<p>Available options are:</p>

<table>
<thead><tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Value</th>
</tr></thead>
<tbody>
<tr>
<td>leaderboards</td>
<td align="center">Array[String]</td>
<td align="right">(Optional) Leaderboards to process, if empty all the leaderboards will be processed.</td>
</tr>
<tr>
<td>max</td>
<td align="center">Number</td>
<td align="right">(Optional) The maximum player position acceptance for the leaderboard to be selected.</td>
</tr>
</tbody>
</table><h3>
<a name="iterating-leaderboard-results" class="anchor" href="#iterating-leaderboard-results"><span class="octicon octicon-link"></span></a>Iterating leaderboard results</h3>

<p><code>Behave::fetchLeaderboardResults()</code> and <code>Behave::fetchLeaderboardPreviousResults()</code> are enough when you want to fetch 1 page of 1000 entries maximum. If you want to iterate trough more results for a leaderboards you can use <code>Behave::iterateLeaderboardResults()</code> and <code>Behave::iterateLeaderboardPreviousResults()</code> instead.</p>

<ul>
<li>The <strong>structure</strong> is identical to <code>Behave::fetchLeaderboardResults()</code>
</li>
<li>The <strong>options</strong> are identical to <code>Behave::fetchLeaderboardResults()</code>
</li>
</ul><p>Example:</p>

<div class="highlight highlight-php"><pre><span class="nx">Behave</span><span class="o">::</span><span class="na">iterateLeaderboardResults</span><span class="p">(</span><span class="s1">'test-lb'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$results</span><span class="p">,</span> <span class="nv">$page</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Use results</span>
<span class="p">},</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">,</span> <span class="c1">// Fetch by batches of 100</span>
  <span class="s1">'max'</span>   <span class="o">=&gt;</span> <span class="mi">2500</span> <span class="c1">// Fetch the top 2500 players</span>
<span class="p">));</span>
</pre></div>

<h3>
<a name="creating-a-leaderboard" class="anchor" href="#creating-a-leaderboard"><span class="octicon octicon-link"></span></a>Creating a leaderboard</h3>

<p>In case your app needs to dynamically create leaderboards. You can use the SDK to create or remove leaderboards.</p>

<div class="highlight highlight-php"><pre><span class="c1">// influencers-lb is the reference_id we want to use</span>
<span class="nx">Behave</span><span class="o">::</span><span class="na">createLeaderboard</span><span class="p">(</span><span class="s1">'Influencers'</span><span class="p">,</span> <span class="s1">'influencers-lb'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'type'</span>         <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_TYPE_BEHAVIOURAL</span><span class="p">,</span>
  <span class="s1">'scoreType'</span>    <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_SCORE_SUM</span><span class="p">,</span>
  <span class="s1">'timeFrame'</span>    <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_TIME_WEEKLY</span><span class="p">,</span>
  <span class="s1">'active'</span>       <span class="o">=&gt;</span> <span class="k">true</span> <span class="c1">// Defaults</span>
<span class="p">));</span>

<span class="c1">// Another example</span>
<span class="nx">Behave</span><span class="o">::</span><span class="na">createLeaderboard</span><span class="p">(</span><span class="s1">'Level 42'</span><span class="p">,</span> <span class="s1">'game-level-42-lb'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'type'</span>         <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_TYPE_SCORE</span><span class="p">,</span>
  <span class="s1">'scoreType'</span>    <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_SCORE_MAX</span><span class="p">,</span>
  <span class="s1">'timeFrame'</span>    <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_TIME_ALLTIME</span><span class="p">,</span>
  <span class="s1">'active'</span>       <span class="o">=&gt;</span> <span class="k">true</span> <span class="c1">// Defaults</span>
<span class="p">));</span>
</pre></div>

<p>Available parameters are:</p>

<table>
<thead><tr>
<th>Name</th>
<th align="center">Type</th>
<th align="right">Value</th>
</tr></thead>
<tbody>
<tr>
<td>(Optional)</td>
<td align="center"></td>
<td align="right"></td>
</tr>
<tr>
<td>type</td>
<td align="center">Number</td>
<td align="right">(Optional) - Available values are <code>Behave::LEADERBOARD_TYPE_SCORE</code> and <code>Behave::LEADERBOARD_TYPE_BEHAVIOURAL</code>. Default is <code>Behave::LEADERBOARD_TYPE_BEHAVIOURAL</code>
</td>
</tr>
<tr>
<td>scoreType</td>
<td align="center">Number</td>
<td align="right">(Optional) - You can specify how the scores are computed, <code>Behave::LEADERBOARD_SCORE_SUM</code> will increment scores, <code>Behave::LEADERBOARD_SCORE_MAX</code> will keep the maximum score for a player and discard the other ones. Note that for is <code>Behave::LEADERBOARD_TYPE_BEHAVIOURAL</code> type, the scoring type will always be <code>Behave::LEADERBOARD_SCORE_SUM</code>
</td>
</tr>
<tr>
<td>timeFrame</td>
<td align="center">Number</td>
<td align="right">(Optional) - Specify how often the leaderboard should be reset. Possible values are: <code>Behave::LEADERBOARD_TIME_ALLTIME</code>, <code>Behave::LEADERBOARD_TIME_DAILY</code>, <code>Behave::LEADERBOARD_TIME_WEEKLY</code>, <code>Behave::LEADERBOARD_TIME_MONTHLY</code>. Default to <code>Behave::LEADERBOARD_TIME_ALLTIME</code>
</td>
</tr>
<tr>
<td>rewards</td>
<td align="center">Array[Object]</td>
<td align="right">Rewards for that leaderboard. See bellow for example</td>
</tr>
<tr>
<td>active</td>
<td align="center">Boolean</td>
<td align="right">Is the leaderboard active? Default to true</td>
</tr>
</tbody>
</table><h3>
<a name="creating-a-leaderboard-with-rewards" class="anchor" href="#creating-a-leaderboard-with-rewards"><span class="octicon octicon-link"></span></a>Creating a leaderboard with rewards</h3>

<p>You can also bind rewards to a leaderboard (So it becomes a contest).
Rewards are Badges. Each reward defines the position in the leaderboard to who this rewards should be given and the Badge that it refers to.</p>

<p>You can define contest leaderboard this way.</p>

<div class="highlight highlight-php"><pre><span class="nx">Behave</span><span class="o">::</span><span class="na">createLeaderboard</span><span class="p">(</span><span class="s1">'Influencers'</span><span class="p">,</span> <span class="s1">'influencers-lb'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
  <span class="s1">'type'</span>         <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_TYPE_BEHAVIOURAL</span><span class="p">,</span>
  <span class="s1">'scoreType'</span>    <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_SCORE_SUM</span><span class="p">,</span>
  <span class="s1">'timeFrame'</span>    <span class="o">=&gt;</span> <span class="nx">Behave</span><span class="o">::</span><span class="na">LEADERBOARD_TIME_WEEKLY</span><span class="p">,</span>
  <span class="s1">'active'</span>       <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span> <span class="c1">// Defaults</span>
  <span class="s1">'rewards'</span>      <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">'position'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'badge'</span> <span class="o">=&gt;</span> <span class="s1">'some-custom-id-or-original-id'</span><span class="p">)</span>
  <span class="p">),</span>
<span class="p">));</span>
</pre></div>

<h3>
<a name="reset-a-leaderboard" class="anchor" href="#reset-a-leaderboard"><span class="octicon octicon-link"></span></a>Reset a leaderboard</h3>

<p>If a leaderboard's time frame is <code>Behave::LEADERBOARD_TIME_ALLTIME</code> you can manually reset it. 
When you reset a leaderboard, the previous results are archived and are available using <code>Behave::fetchLeaderboardPreviousResults</code> or <code>Behave::iterateLeaderboardResults</code>.</p>

<div class="highlight highlight-php"><pre><span class="nx">Behave</span><span class="o">::</span><span class="na">resetLeaderboard</span><span class="p">(</span><span class="s1">'game-level-42-lb'</span><span class="p">);</span>
</pre></div>

<p><strong>Note</strong>: Calling <code>Behave::resetLeaderboard()</code> on a leaderboard with a time frame different than <code>Behave::LEADERBOARD_TIME_ALLTIME</code> will throw an error.</p>

<h3>
<a name="deleting-a-leaderboard" class="anchor" href="#deleting-a-leaderboard"><span class="octicon octicon-link"></span></a>Deleting a leaderboard</h3>

<p>You can delete a leaderboard at anytime. <strong>THIS ACTION CANNOT BE UNDONE</strong></p>

<div class="highlight highlight-php"><pre><span class="nx">Behave</span><span class="o">::</span><span class="na">deleteLeaderboard</span><span class="p">(</span><span class="s1">'some-custom-id-or-original-id'</span><span class="p">);</span>
</pre></div>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
